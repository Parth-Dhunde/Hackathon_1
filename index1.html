<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kisan Sahayata - Farmer's Assistant</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <!-- Google Maps API -->
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBOjuBl6epP96H_ZuTo_U5ArtLUL9RZWpE"></script>
</head>
<body>
    <header>
        <nav>
            <div class="logo" data-translate>Kisan Sahayata</div>
            <div class="language-selector">
                <select id="languageSelect" onchange="handleLanguageChange(event)">
                    <option value="en">English</option>
                    <option value="hi">‡§π‡§ø‡§Ç‡§¶‡•Ä (Hindi)</option>
                    <option value="ta">‡Æ§‡ÆÆ‡Æø‡Æ¥‡Øç (Tamil)</option>
                    <option value="te">‡∞§‡±Ü‡∞≤‡±Å‡∞ó‡±Å (Telugu)</option>
                    <option value="kn">‡≤ï‡≤®‡≥ç‡≤®‡≤° (Kannada)</option>
                    <option value="mr">‡§Æ‡§∞‡§æ‡§†‡•Ä (Marathi)</option>
                    <option value="bn">‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ (Bengali)</option>
                    <option value="gu">‡™ó‡´Å‡™ú‡™∞‡™æ‡™§‡´Ä (Gujarati)</option>
                    <option value="pa">‡®™‡©∞‡®ú‡®æ‡®¨‡©Ä (Punjabi)</option>
                </select>
            </div>
        </nav>
    </header>

    <main>
        <section class="hero">
            <h1 data-translate>Welcome to Kisan Sahayata</h1>
            <p data-translate>Your Digital Farming Assistant</p>
            <button class="redirect-btn" onclick="redirect()">Go to Crop Prediction</button>
        </section>

        <section class="location-section">
            <h2>Farm Location</h2>
            <div id="map"></div>
            <div class="location-input">
                <input type="text" id="locationSearch" placeholder="Search for your farm location">
                <button onclick="searchLocation()">Search Location</button>
                <button onclick="getCurrentLocation()">Use Current Location</button>
            </div>
        </section>

        <section class="weather-section">
            <h2 data-translate>Weather Information</h2>
            <div class="weather-grid">
                <div class="weather-card">
                    <i class="fas fa-temperature-high"></i>
                    <h3 data-translate>Temperature</h3>
                    <p id="temperature">--¬∞C</p>
                    <span class="emoji-indicator">üå°Ô∏è</span>
                </div>
                <div class="weather-card">
                    <i class="fas fa-tint"></i>
                    <h3 data-translate>Humidity</h3>
                    <p id="humidity">--%</p>
                </div>
                <div class="weather-card">
                    <i class="fas fa-cloud-rain"></i>
                    <h3>Rainfall</h3>
                    <p id="rainfall">--mm</p>
                </div>
                <div class="weather-card">
                    <i class="fas fa-wind"></i>
                    <h3>Wind Speed</h3>
                    <p id="windSpeed">--km/h</p>
                </div>
            </div>
        </section>

        <section class="soil-section">
            <h2>Soil Information</h2>
            <div class="soil-grid">
                <div class="soil-card">
                    <i class="fas fa-water"></i>
                    <h3>Soil Moisture</h3>
                    <p id="soilMoisture">--%</p>
                </div>
                <div class="soil-card">
                    <i class="fas fa-flask"></i>
                    <h3>pH Level</h3>
                    <p id="soilPH">--</p>
                </div>
            </div>
        </section>

        <section class="disease-detection">
            <h2>Crop Disease Detection</h2>
            <div class="upload-section">
                <input type="file" id="cropImage" accept="image/*">
                <button onclick="detectDisease()">Detect Disease</button>
            </div>
            <div id="diseaseResult" class="result-card"></div>
        </section>

        <section class="ai-assistant">
            <h2>AI Assistant</h2>
            <div class="chat-container">
                <div id="chatMessages" class="chat-messages"></div>
                <div class="chat-input">
                    <input type="text" id="userInput" placeholder="Ask your question...">
                    <button onclick="sendMessage()">Send</button>
                    <button onclick="startVoiceInput()"><i class="fas fa-microphone"></i></button>
                </div>
            </div>
        </section>

        <section class="recommendations">
            <h2>AI Recommendations</h2>
            <div class="recommendations-grid">
                <div class="recommendation-card">
                    <h3>Fertilizer Recommendations</h3>
                    <div id="fertilizerRec"></div>
                </div>
                <div class="recommendation-card">
                    <h3>Pest Control</h3>
                    <div id="pestControlRec"></div>
                </div>
            </div>
        </section>

        <section class="government-schemes" onclick="redirectToScheme()">
            <h2>
                <i class="fas fa-government"></i>
                <span data-translate>Government Schemes</span>
                <button onclick="readAloud('government-schemes')" class="read-aloud-btn">
                    <i class="fas fa-volume-up"></i>
                </button>
            </h2>
            <div id="schemesList" class="schemes-grid"></div>
        </section>
    </main>

    <footer>
        <p>&copy; 2024 Kisan Sahayata. All rights reserved.</p>
    </footer>

    <script>
        let searchedLocation = '';

        function searchLocation() {
            searchedLocation = document.getElementById('locationSearch').value;
            // Existing search functionality can remain here
        }

        function redirect() {
            const location = encodeURIComponent(searchedLocation || document.getElementById('locationSearch').value);
            window.location.href = `http://localhost:8501/?location=${location}`;
        }
    </script>
    <script src="script.js"></script>
</body>
</html>